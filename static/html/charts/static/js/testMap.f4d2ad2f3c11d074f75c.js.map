{"version":3,"sources":["webpack:///static/js/testMap.f4d2ad2f3c11d074f75c.js","webpack:///./src/loader/loader.js?2c6a","webpack:///./src/apps/testMap/images/header.png","webpack:///./src/util/util.js?cade","webpack:///./src/util/request.js?0ff7","webpack:///./src/util/errorTips/errorDialog.hbs?2173","webpack:///./src/apps/testMap/config.js","webpack:///./src/apps/testMap/map/index.js","webpack:///./src/apps/testMap/mock/index.js","webpack:///./src/apps/testMap/index.js","webpack:///./src/apps/testMap/map/layers/blurPointsLayer.js","webpack:///./src/config.js?4264","webpack:///./src/apps/testMap/map/layers/personHeaderLayer.js","webpack:///./src/apps/testMap/map/layers/pointsLayer.js","webpack:///./src/apps/testMap/map/layers/popup.js","webpack:///./src/apps/testMap/map/map.js","webpack:///./src/apps/testMap/mock/mapPoints.js","webpack:///./src/apps/testMap/mock/realHeader.js","webpack:///./src/apis.js?393b","webpack:///./src/loader/base.config.js?f70b","webpack:///./src/util/typeCheck.js?2e50","webpack:///./src/util/zoom/zoom.js?db02"],"names":["webpackJsonp","104","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_reset_css__","__WEBPACK_IMPORTED_MODULE_1__common_common_css__","n","__WEBPACK_IMPORTED_MODULE_2__util_zoom_zoom__","__WEBPACK_IMPORTED_MODULE_3__config__","__WEBPACK_IMPORTED_MODULE_4__apis__","__WEBPACK_IMPORTED_MODULE_5__base_config__","load","app","me","this","merge","config","apis","initZoom","init","get","i","window","addEventListener","1167","exports","p","132","delay","func","delayMillis","immediate","setTimeout","d","errorTooltip","__WEBPACK_IMPORTED_MODULE_0_jquery__","__WEBPACK_IMPORTED_MODULE_0_jquery___default","data","errorTpl","html","fadeIn","on","evt","stopPropagation","preventDefault","fadeOut","empty","133","fetch","apiName","arguments","length","undefined","callback","__WEBPACK_IMPORTED_MODULE_5__typeCheck__","ajaxConfig","__WEBPACK_IMPORTED_MODULE_6__apis__","extraAjaxConfig","ajaxData","filterData","contentType","indexOf","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify___default","processData","formData","FormData","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys___default","forEach","key","val","append","__WEBPACK_IMPORTED_MODULE_3_jquery___default","a","ajax","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","url","dataType","done","response","code","__WEBPACK_IMPORTED_MODULE_4__util__","msg","result","fail","fetchInterval","cb","interval","argumentsLength","defaultInterval","__WEBPACK_IMPORTED_MODULE_7__config__","hasClosed","delayFetchInterval","always","close","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_3_jquery__","__WEBPACK_IMPORTED_MODULE_8_reconnecting_websocket__","171","172","173","Handlebars","template","compiler","main","container","depth0","helpers","partials","helper","escapeExpression","helperMissing","call","nullContext","name","hash","useData","191","MAP_TILE_URL","CENTER_VIEW","MAP_ZOOM","335","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_2__map__","__WEBPACK_IMPORTED_MODULE_3__layers_pointsLayer__","__WEBPACK_IMPORTED_MODULE_4__layers_personHeaderLayer__","__WEBPACK_IMPORTED_MODULE_5__layers_popup__","__WEBPACK_IMPORTED_MODULE_6__layers_blurPointsLayer__","__WEBPACK_IMPORTED_MODULE_7__util_request__","__WEBPACK_IMPORTED_MODULE_8_openlayers__","__WEBPACK_IMPORTED_MODULE_8_openlayers___default","geoJSONFormatter","format","GeoJSON","featureProjection","MapIndex","map","mapInstance","getMapInstance","pointsLayer","personHeaderLayer","popup","blurPointsLayer","blurPointsInstance","getLayer","addLayer","pointsLayerInstance","personHeaderLayerInstance","popupInstance","getOverlay","addOverlay","value","self","features","readFeatures","addFeatures","updateStyle","feature","removeFeature","hit","hasFeatureAtPixel","pixel","getViewport","style","cursor","_map$forEachFeatureAt","forEachFeatureAtPixel","subFeature","subLayer","layer","isPointLayer","addFeature","set","closePopup","removeOverlay","document","getElementById","innerHTML","setPosition","coordinate","336","__WEBPACK_IMPORTED_MODULE_0__mapPoints__","__WEBPACK_IMPORTED_MODULE_1__realHeader__","MapPointsFetch","RealHeaderFetch","338","368","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__loader_loader__","__WEBPACK_IMPORTED_MODULE_1__mock__","__WEBPACK_IMPORTED_MODULE_2__index_css__","__WEBPACK_IMPORTED_MODULE_4__map___","renderPoints","renderPersonHeader","bindClickEvent","369","__WEBPACK_IMPORTED_MODULE_2_openlayers__","__WEBPACK_IMPORTED_MODULE_2_openlayers___default","createBlurCircle","r","color","shadowBlur","canvas","createElement","realR","Math","ceil","realDiameter","width","height","ctx","getContext","shadowColor","fillStyle","beginPath","arc","PI","closePath","fill","BlurPointsLayer","Vector","source","radius","img","Style","image","Icon","imgSize","getSource","37","srcConfig","370","__WEBPACK_IMPORTED_MODULE_3__images_header_png__","__WEBPACK_IMPORTED_MODULE_3__images_header_png___default","PersonHeaderLayer","setStyle","anchorXUnits","anchorYUnits","src","setVisible","371","PointsLayer","layerName","clear","strokeColor","Circle","Fill","stroke","Stroke","372","Popup","ele","overlay","Overlay","element","autoPan","autoPanAnimation","duration","target","onclick","blur","373","__WEBPACK_IMPORTED_MODULE_3_openlayers_dist_ol_css__","__WEBPACK_IMPORTED_MODULE_4__config__","Map","layers","Tile","XYZ","controls","control","defaults","attributionOptions","collapsible","view","View","center","zoom","374","__WEBPACK_IMPORTED_MODULE_0_mockjs__","__WEBPACK_IMPORTED_MODULE_0_mockjs___default","Random","extent","geoJson","range","count","localCount","geo","type","crs","properties","push","geometry","coordinates","float","cname","pick","gender","age","integer","nation","cword","nativePlace","city","idCard","id","portrait","floor","random","mock","375","genGeo","age|20-50","time","location","reason","78","global","normalizeHost","host","isWebsocket","hosts","normalProtocol","protocol","__WEBPACK_IMPORTED_MODULE_1_mockjs__","__WEBPACK_IMPORTED_MODULE_1_mockjs___default","__WEBPACK_IMPORTED_MODULE_2__config__","__WEBPACK_IMPORTED_MODULE_3__util_typeCheck__","apiMap","paramReg","apiConfigMap","websocketHost","prototype","hasOwnProperty","apiConfig","toLowerCase","reg","rawUrl","replace","str","paramName","encodeURIComponent","regStr","RegExp","resData","execRes","exec","79","search","mockInterval","proxy","proxyHost","websocketProxyHost","mapHost","pageWidth","pageHeight","80","is","expectType","toString","isObject","isFunction","isNumber","isArray","81","x","innerWidth","__WEBPACK_IMPORTED_MODULE_1__config__","y","innerHeight","lastScale","body","css","adaptZoom","addClass","originToDeformation","origin","__WEBPACK_IMPORTED_MODULE_0__zoom_css__","__WEBPACK_IMPORTED_MODULE_2_jquery__","__WEBPACK_IMPORTED_MODULE_2_jquery___default"],"mappings":"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","file":"static/js/testMap.f4d2ad2f3c11d074f75c.js","sourcesContent":["webpackJsonp([13],{\n\n/***/ 104:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_reset_css__ = __webpack_require__(286);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_reset_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_reset_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__common_common_css__ = __webpack_require__(171);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__common_common_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__common_common_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util_zoom_zoom__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__apis__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__base_config__ = __webpack_require__(79);\n/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-18 09:11:51\r\n * @Description: 初始化应用\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-07-20 10:56:29\r\n */\n\n// 样式重置\n\n// 加载公用的css\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  /**\r\n   *  执行初始化操作，然后执行app的初始化逻辑\r\n   *  @param    {Object}  app 页面实例\r\n   */\n  load: function load(app) {\n    var me = this;\n\n    // 将全局配置合并到全局api\n    __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].merge(__WEBPACK_IMPORTED_MODULE_5__base_config__[\"a\" /* default */]);\n    // 将应用配置合并到全局api\n    __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].merge(app.config);\n\n    // 将应用的接口配置合并到全局api\n    __WEBPACK_IMPORTED_MODULE_4__apis__[\"a\" /* default */].merge(app.apis);\n\n    me.initZoom();\n\n    // 初始化app\n    app.init();\n  },\n\n  /**\r\n   *  根据config，判断是否需要执行zoom逻辑\r\n   */\n  initZoom: function initZoom() {\n    if (__WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].get('zoom')) {\n      // 为true，启用自动缩放\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util_zoom_zoom__[\"a\" /* adaptZoom */])();\n      window.addEventListener('resize', __WEBPACK_IMPORTED_MODULE_2__util_zoom_zoom__[\"b\" /* default */]);\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util_zoom_zoom__[\"b\" /* default */])();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 1167:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/img/header.fd3cfab.png\";\n\n/***/ }),\n\n/***/ 132:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return errorTooltip; });\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = delay;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/**\r\n * @Author:      baizn\r\n * @DateTime:    2017-01-17 09:24:27\r\n * @Description: 通用工具方法\r\n * @Last Modified By:   baizn\r\n * @Last Modified Time:    2017-01-17 09:24:27\r\n */\n\n\n\n/**\r\n * @describe [错误提示]\r\n * @param    {[type]}   data [提示内容]\r\n * @return {boolean} false\r\n */\nvar errorTooltip = function errorTooltip(data) {\n  var errorTpl = __webpack_require__(173);\n  var html = errorTpl({\n    data: data\n  });\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.error-dialog').html(html);\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#errorDialog').fadeIn(50);\n  // 关闭错误提示\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#errorDialog').on('click', '.close-model', function (evt) {\n    evt.stopPropagation();\n    evt.preventDefault();\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#errorDialog').fadeOut(50);\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.error-dialog').empty();\n  });\n  return false;\n};\n\n/**\r\n *  生成一个延迟函数\r\n *  @param    {Function}  func        需要延迟执行的函数\r\n *  @param    {number}  delayMillis 延迟执行的毫秒数\r\n *  @return   {Function}  延迟函数\r\n */\nfunction delay(func, delayMillis) {\n  /**\r\n   * 延迟函数\r\n   * @param    {boolean=}  immediate 是否立即执行（可选，默认为false）\r\n   * @return {function} 延时函数\r\n   */\n  return function delayFunc(immediate) {\n    if (immediate === true) {\n      func();\n    } else {\n      setTimeout(func, delayMillis);\n    }\n  };\n}\n\n/***/ }),\n\n/***/ 133:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = fetch;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = fetchInterval;\n/* unused harmony export fetchSocket */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys__ = __webpack_require__(135);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify__ = __webpack_require__(134);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util__ = __webpack_require__(132);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__typeCheck__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__apis__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__config__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_reconnecting_websocket__ = __webpack_require__(295);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_reconnecting_websocket___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_reconnecting_websocket__);\n\n\n\n/**\r\n * @Author:      baizn\r\n * @DateTime:    2017-03-20 13:36:18\r\n * @Description: Description\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-09-26 10:49:47\r\n */\n\n\n\n\n\n\n\n\n/**\r\n * 普通AJAX请求\r\n *  如果向后端传递的数据需要是json，那么接口.config.contentType应为'application/json; charset=UTF-8'\r\n *  如果向后端传递的数据需要传递文件，那么接口.config.contentType应为'multipart/form-data; charset=UTF-8'\r\n * \r\n * @export 对外暴露方法\r\n * @param {string} apiName 接口名称\r\n * @param {object} [data={}] 接口参数 可选\r\n * @param {function} callback 回调函数\r\n * @returns {Boolean} false\r\n */\nfunction fetch(apiName) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var callback = arguments[2];\n\n  if (arguments.length === 2 && __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__typeCheck__[\"a\" /* isFunction */])(data)) {\n    // 只传了apiName和callback\n    callback = data;\n    data = {};\n  }\n  var ajaxConfig = __WEBPACK_IMPORTED_MODULE_6__apis__[\"a\" /* default */].config(apiName);\n  var extraAjaxConfig = {};\n  var ajaxData = __WEBPACK_IMPORTED_MODULE_6__apis__[\"a\" /* default */].filterData(apiName, data);\n  if (ajaxConfig.contentType) {\n    var contentType = ajaxConfig.contentType;\n    if (contentType.indexOf('application/json') != -1) {\n      // application/json的要自己将传递的数据转换成字符串\n      ajaxData = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify___default()(ajaxData);\n    } else if (contentType.indexOf('multipart/form-data') != -1) {\n      // 有文件要上传，使用formData\n      // 把contentType置为false，由xhr自己生成，避免使用者忘记设置boundary\n      extraAjaxConfig.contentType = false;\n      // xhr可直接发送formData，不用jquery重复处理数据\n      extraAjaxConfig.processData = false;\n      var formData = new FormData();\n      __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys___default()(ajaxData).forEach(function (key) {\n        var val = ajaxData[key];\n        if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__typeCheck__[\"b\" /* isArray */])(val)) {\n          val.forEach(function (val) {\n            formData.append(key, val);\n          });\n        } else {\n          formData.append(key, val);\n        }\n      });\n      extraAjaxConfig.data = formData;\n    }\n  }\n  return __WEBPACK_IMPORTED_MODULE_3_jquery___default.a.ajax(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    url: __WEBPACK_IMPORTED_MODULE_6__apis__[\"a\" /* default */].url(apiName, data),\n    dataType: 'json',\n    data: ajaxData\n  }, ajaxConfig, extraAjaxConfig)).done(function (response) {\n    if (!response.code) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__util__[\"a\" /* errorTooltip */])('\\u8C03\\u540E\\u53F0\\u63A5\\u53E3\\u5931\\u8D25:' + response.msg);\n    }\n    callback && callback(response.result);\n  }).fail(function () {\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__util__[\"a\" /* errorTooltip */])('请求失败: 系统错误');\n  });\n}\n\n/**\r\n *  向指定api循环发送发送请求\r\n *  @param    {string}   apiName api名称\r\n *  @param    {object=}   data    请求参数（可选）\r\n *  @param    {Function}    cb    处理响应数据的回调\r\n *  @param    {number=}    interval    轮询间隔（毫秒）（可选，默认为配置值）\r\n *  @return   {Object}   用于对轮询状态进行操作的实例\r\n */\nfunction fetchInterval(apiName, data, cb, interval) {\n  var argumentsLength = arguments.length;\n  var defaultInterval = __WEBPACK_IMPORTED_MODULE_7__config__[\"a\" /* default */].get('fetchInterval');\n  if (argumentsLength === 2) {\n    // 只传了2个参数\n    // 没传data，没传interval\n    cb = data;\n    data = null;\n    interval = null;\n  } else if (argumentsLength === 3) {\n    // 只传了3个参数\n    if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__typeCheck__[\"a\" /* isFunction */])(cb)) {\n      // 没有传interval\n      interval = null;\n    } else if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__typeCheck__[\"c\" /* isNumber */])(cb)) {\n      // 没有传data\n      interval = cb;\n      cb = data;\n      data = null;\n    }\n  }\n\n  data = data || {};\n  interval = interval || defaultInterval;\n\n  var hasClosed = false;\n  var delayFetchInterval = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__util__[\"b\" /* delay */])(function () {\n    if (hasClosed) {\n      return;\n    }\n    fetch(apiName, data, cb).always(delayFetchInterval);\n  }, interval);\n  delayFetchInterval(true);\n  return {\n    // 停止轮询\n    close: function close() {\n      hasClosed = true;\n    }\n  };\n}\n\n/**\r\n *  建立websocket链接\r\n *  @param    {string}   apiName api名称\r\n *  @param    {Object=}   data    请求参数（可选）\r\n *  @param    {Function} cb      处理推送数据的回调\r\n *  @return   {Websocket}   websocket实例\r\n */\nfunction fetchSocket(apiName, data, cb) {\n  if (arguments.length === 2 && __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__typeCheck__[\"a\" /* isFunction */])(data)) {\n    // 只传了2个参数，并且第2个参数是函数，说明第二个参数是cb\n    cb = data;\n    data = {};\n  }\n  if (__WEBPACK_IMPORTED_MODULE_7__config__[\"a\" /* default */].get('mock')) {\n    // 需要mock，那么使用fetchInterval模拟\n    var fakeWs = fetchInterval(apiName, data, cb);\n    return fakeWs;\n  }\n  // 不需要mock，创建真实的websocket\n  var ws = new __WEBPACK_IMPORTED_MODULE_8_reconnecting_websocket___default.a(__WEBPACK_IMPORTED_MODULE_6__apis__[\"a\" /* default */].url(apiName, data));\n  ws.onmessage = cb;\n  ws.onclose = function () {\n    this.close();\n  };\n  // 当页面被卸载时，需要断开websocket\n  window.addEventListener('unload', function close() {\n    window.removeEventListener('unload', close);\n    ws.close();\n  });\n  return ws;\n}\n\n/***/ }),\n\n/***/ 171:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 172:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 173:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Handlebars = __webpack_require__(7);\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"model-bg\\\" id=\\\"errorDialog\\\">\\r\\n  <div class=\\\"model-container\\\">\\r\\n    <div class=\\\"model-body\\\">\"\n    + container.escapeExpression(((helper = (helper = helpers.data || (depth0 != null ? depth0.data : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"data\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\r\\n        \\r\\n    <div class=\\\"close-model\\\"></div>\\r\\n  </div>\\r\\n</div>\";\n},\"useData\":true});\n\n/***/ }),\n\n/***/ 191:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  MAP_TILE_URL: 'https://api.mapbox.com/styles/v1/baizn/cj60h9n5b1o1t2smjct2ack3d/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYmFpem4iLCJhIjoiY2o1aXkxbDk4MWwwaDMzbW5oaDNxN240bCJ9.RKUQwXa57CuEaYhZBafuqw',\n  CENTER_VIEW: [13046665.245916, 4739506.713976609],\n  MAP_ZOOM: 13\n});\n\n/***/ }),\n\n/***/ 335:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__map__ = __webpack_require__(373);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__layers_pointsLayer__ = __webpack_require__(371);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__layers_personHeaderLayer__ = __webpack_require__(370);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__layers_popup__ = __webpack_require__(372);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__layers_blurPointsLayer__ = __webpack_require__(369);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_request__ = __webpack_require__(133);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_openlayers__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_openlayers___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_openlayers__);\n\n\n\n\n\n\n\n\n\n\n\nvar geoJSONFormatter = new __WEBPACK_IMPORTED_MODULE_8_openlayers___default.a.format.GeoJSON({\n  featureProjection: 'EPSG: 3857'\n});\n\nvar MapIndex = function () {\n  function MapIndex() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, MapIndex);\n\n    var map = new __WEBPACK_IMPORTED_MODULE_2__map__[\"a\" /* default */]('map');\n    this.mapInstance = map.getMapInstance();\n\n    this.pointsLayer = new __WEBPACK_IMPORTED_MODULE_3__layers_pointsLayer__[\"a\" /* default */]();\n    this.personHeaderLayer = new __WEBPACK_IMPORTED_MODULE_4__layers_personHeaderLayer__[\"a\" /* default */]();\n    this.popup = new __WEBPACK_IMPORTED_MODULE_5__layers_popup__[\"a\" /* default */]('popup');\n    this.blurPointsLayer = new __WEBPACK_IMPORTED_MODULE_6__layers_blurPointsLayer__[\"a\" /* default */]();\n\n    var blurPointsInstance = this.blurPointsLayer.getLayer();\n    this.mapInstance.addLayer(blurPointsInstance);\n\n    var pointsLayerInstance = this.pointsLayer.getLayer();\n    this.mapInstance.addLayer(pointsLayerInstance);\n\n    var personHeaderLayerInstance = this.personHeaderLayer.getLayer();\n    this.mapInstance.addLayer(personHeaderLayerInstance);\n\n    var popupInstance = this.popup.getOverlay();\n    this.mapInstance.addOverlay(popupInstance);\n  }\n\n  /**\r\n   * 渲染散点layer\r\n   * \r\n   * @memberof MapIndex\r\n   */\n\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(MapIndex, [{\n    key: 'renderPoints',\n    value: function renderPoints() {\n      var self = this;\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__util_request__[\"a\" /* fetch */])('MapPointsFetch', function (data) {\n        var features = geoJSONFormatter.readFeatures(data);\n        self.pointsLayer.addFeatures(features);\n\n        self.pointsLayer.updateStyle();\n      });\n    }\n\n    /**\r\n     * 渲染人员头像layer\r\n     * \r\n     * @memberof MapIndex\r\n     */\n\n  }, {\n    key: 'renderPersonHeader',\n    value: function renderPersonHeader() {\n      var self = this;\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__util_request__[\"b\" /* fetchInterval */])('RealHeaderFetch', function (data) {\n        var features = geoJSONFormatter.readFeatures(data);\n        self.personHeaderLayer.addFeatures(features);\n        self.personHeaderLayer.updateStyle();\n        setTimeout(function () {\n          features.forEach(function (feature) {\n            if (!feature.get('isVisibiled')) {\n              self.personHeaderLayer.removeFeature(feature);\n            }\n          });\n        }, 4000);\n      }, 5000);\n    }\n\n    /**\r\n     * 绑定地图上点击事件\r\n     * \r\n     * @memberof MapIndex\r\n     */\n\n  }, {\n    key: 'bindClickEvent',\n    value: function bindClickEvent() {\n      var self = this;\n      var map = self.mapInstance;\n\n      map.on('pointermove', function (evt) {\n        var hit = map.hasFeatureAtPixel(evt.pixel);\n        map.getViewport().style.cursor = hit ? 'pointer' : '';\n      });\n\n      map.on('singleclick', function (evt) {\n        var _map$forEachFeatureAt = map.forEachFeatureAtPixel(evt.pixel, function (subFeature, subLayer) {\n          /**\r\n           * 比较当前操作的是哪个layer，有两种实现方式:\r\n           * 1、使用实例比较，layer === self.pointsLayer.getLayer()\r\n           * 2、在new layer时候添加自定义属性，如layerName，标识当前layer，\r\n           *  使用layer.get('layerName')获取layer标识值\r\n           */\n\n          return { feature: subFeature, layer: subLayer };\n        }),\n            feature = _map$forEachFeatureAt.feature,\n            layer = _map$forEachFeatureAt.layer;\n\n        if (!feature) {\n          return false;\n        }\n\n        var isPointLayer = layer === self.pointsLayer.getLayer();\n        if (isPointLayer) {\n          self.blurPointsLayer.addFeature(feature);\n        }\n\n        // if(choosedFeatures && choosedFeatures != feature) {\n        //   choosedFeatures.set('isVisibiled', false)\n        //   self.personHeaderLayer.removeFeature(choosedFeatures)\n        // }\n        // choosedFeatures = feature\n        feature.set('isVisibiled', true);\n        self.popup.closePopup('popup-closer', function () {\n          feature.set('isVisibiled', false);\n          if (isPointLayer) {\n            self.blurPointsLayer.removeFeature(feature);\n          } else {\n            self.personHeaderLayer.removeFeature(feature);\n          }\n\n          map.removeOverlay(self.popup);\n        });\n\n        // 加载模板\n        var content = document.getElementById('popup-content');\n        content.innerHTML = '<p>You name:</p><code>' + feature.get('name') + '</code>';\n        self.popup.getOverlay().setPosition(evt.coordinate);\n      });\n    }\n  }]);\n\n  return MapIndex;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (MapIndex);\n\n/***/ }),\n\n/***/ 336:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mapPoints__ = __webpack_require__(374);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__realHeader__ = __webpack_require__(375);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  MapPointsFetch: __WEBPACK_IMPORTED_MODULE_0__mapPoints__[\"a\" /* default */],\n  RealHeaderFetch: __WEBPACK_IMPORTED_MODULE_1__realHeader__[\"a\" /* default */]\n});\n\n/***/ }),\n\n/***/ 338:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 368:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loader_loader__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mock__ = __webpack_require__(336);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__index_css__ = __webpack_require__(338);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__index_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__index_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__(191);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__map___ = __webpack_require__(335);\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0__loader_loader__[\"a\" /* default */].load({\n  apis: __WEBPACK_IMPORTED_MODULE_1__mock__[\"a\" /* default */],\n  config: __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */],\n  init: function init() {\n    var map = new __WEBPACK_IMPORTED_MODULE_4__map___[\"a\" /* default */]();\n    map.renderPoints();\n    map.renderPersonHeader();\n    map.bindClickEvent();\n  }\n});\n\n/***/ }),\n\n/***/ 369:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_openlayers__);\n\n\n\n\nvar createBlurCircle = function createBlurCircle(r, color, shadowBlur) {\n  var canvas = document.createElement('canvas');\n  var realR = Math.ceil(r + shadowBlur * 1.3);\n  var realDiameter = realR * 2;\n\n  canvas.width = realDiameter;\n  canvas.height = realDiameter;\n\n  var ctx = canvas.getContext('2d');\n\n  ctx.shadowColor = color;\n  ctx.shadowBlur = shadowBlur;\n  ctx.fillStyle = color;\n\n  ctx.beginPath();\n  ctx.arc(realR, realR, r, 0, 2 * Math.PI);\n  ctx.closePath();\n\n  ctx.fill();\n\n  return canvas;\n};\n\nvar BlurPointsLayer = function () {\n  /**\r\n   * Creates an instance of BlurPointsLayer.\r\n   * @memberof BlurPointsLayer\r\n   */\n  function BlurPointsLayer() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, BlurPointsLayer);\n\n    this.layer = new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.layer.Vector({\n      source: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.source.Vector(),\n      style: function style(feature) {\n        // 根据feature里面的数据大小来计算\n        var radius = 10;\n        if (feature.get('age') > 80) {\n          radius = 15;\n        } else if (feature.get('age') > 40) {\n          radius = 10;\n        } else {\n          radius = 5;\n        }\n        var img = createBlurCircle(radius, '#fff', 10);\n        return new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.style.Style({\n          image: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.style.Icon({\n            img: img,\n            imgSize: [img.width, img.height]\n          })\n        });\n      }\n    });\n  }\n\n  /**\r\n   * 获取BlurPointsLayer的layer实例\r\n   * \r\n   * @returns this.layer\r\n   * @memberof BlurPointsLayer\r\n   */\n\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(BlurPointsLayer, [{\n    key: 'getLayer',\n    value: function getLayer() {\n      return this.layer;\n    }\n\n    /**\r\n     * 将feature添加到layer中\r\n     * \r\n     * @param {any} feature 需要添加的feature\r\n     * @memberof BlurPointsLayer\r\n     */\n\n  }, {\n    key: 'addFeature',\n    value: function addFeature(feature) {\n      this.getLayer().getSource().addFeature(feature);\n    }\n\n    /**\r\n     * 删除对应的feature\r\n     * \r\n     * @param {any} feature 要删除的feature\r\n     * @memberof BlurPointsLayer\r\n     */\n\n  }, {\n    key: 'removeFeature',\n    value: function removeFeature(feature) {\n      this.getLayer().getSource().removeFeature(feature);\n    }\n  }]);\n\n  return BlurPointsLayer;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (BlurPointsLayer);\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n\n/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-17 15:29:37\r\n * @Description: 全局配置\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-07-20 11:09:36\r\n */\nvar config = {};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  /**\r\n   *  将源配置覆盖到全局配置\r\n   *  @param    {Object}  srcConfig 源配置，将会覆盖到全局配置\r\n   */\n  merge: function merge(srcConfig) {\n    config = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, config, srcConfig);\n  },\n\n  /**\r\n   *  获取某个配置项的值\r\n   *  @param    {string}  key 配置项的key\r\n   *  @return   {*}  配置项的值\r\n   */\n  get: function get(key) {\n    return config[key];\n  }\n});\n\n/***/ }),\n\n/***/ 370:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_openlayers__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__images_header_png__ = __webpack_require__(1167);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__images_header_png___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__images_header_png__);\n\n\n\n\n\nvar PersonHeaderLayer = function () {\n  /**\r\n   * Creates an instance of PersonHeaderLayer.\r\n   * @memberof PersonHeaderLayer\r\n   */\n  function PersonHeaderLayer() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, PersonHeaderLayer);\n\n    this.personHeaderLayer = new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.layer.Vector({\n      source: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.source.Vector()\n    });\n    this.source = this.personHeaderLayer.getSource();\n  }\n\n  /**\r\n   * 获取PersonHeaderLayer的实例\r\n   * \r\n   * @returns this.personHeaderLayer\r\n   * @memberof PersonHeaderLayer\r\n   */\n\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(PersonHeaderLayer, [{\n    key: 'getLayer',\n    value: function getLayer() {\n      return this.personHeaderLayer;\n    }\n\n    /**\r\n     * 将feature添加到PersonHeaderLayer中\r\n     * \r\n     * @param {any} features 需要添加的feature\r\n     * @memberof PersonHeaderLayer\r\n     */\n\n  }, {\n    key: 'addFeatures',\n    value: function addFeatures(features) {\n      // this.source.clear()\n      this.source.addFeatures(features);\n    }\n\n    /**\r\n     * 删除feature\r\n     * \r\n     * @param {any} feature 需要删除的feature\r\n     * @memberof PersonHeaderLayer\r\n     */\n\n  }, {\n    key: 'removeFeature',\n    value: function removeFeature(feature) {\n      this.source.removeFeature(feature);\n    }\n\n    /**\r\n     * 设置/更新PersonHeaderLayer的样式\r\n     * \r\n     * @memberof PersonHeaderLayer\r\n     */\n\n  }, {\n    key: 'updateStyle',\n    value: function updateStyle() {\n      this.personHeaderLayer.setStyle(function (feature) {\n        return new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.style.Style({\n          image: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.style.Icon({\n            anchorXUnits: 'pixels',\n            anchorYUnits: 'pixels',\n            src: feature.get('img') || __WEBPACK_IMPORTED_MODULE_3__images_header_png___default.a\n          })\n        });\n      });\n    }\n\n    /**\r\n     * 显示人员散点layer\r\n     * \r\n     * @memberof PersonHeaderLayer\r\n     */\n\n  }, {\n    key: 'show',\n    value: function show() {\n      this.personHeaderLayer.setVisible(true);\n    }\n\n    /**\r\n     * 隐藏人员散点layer\r\n     * \r\n     * @memberof PersonHeaderLayer\r\n     */\n\n  }, {\n    key: 'hide',\n    value: function hide() {\n      this.personHeaderLayer.setVisible(false);\n    }\n  }]);\n\n  return PersonHeaderLayer;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PersonHeaderLayer);\n\n/***/ }),\n\n/***/ 371:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_openlayers__);\n\n\n\n\n/**\r\n * 散点类PointsLayer\r\n * \r\n * @export\r\n * @class PointsLayer\r\n */\n\nvar PointsLayer = function () {\n  function PointsLayer() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, PointsLayer);\n\n    this.pointsLayer = new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.layer.Vector({\n      source: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.source.Vector(),\n      layerName: 'points'\n    });\n  }\n\n  /**\r\n   * 获取PointsLayer的实例\r\n   * \r\n   * @returns this.pointsLayer\r\n   * @memberof PointsLayer\r\n   */\n\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(PointsLayer, [{\n    key: 'getLayer',\n    value: function getLayer() {\n      return this.pointsLayer;\n    }\n\n    /**\r\n       * 在PointsLayer上添加features\r\n       * \r\n       * @param {any} features 根据数据生成的features\r\n       * @memberof PointsLayer\r\n       */\n\n  }, {\n    key: 'addFeatures',\n    value: function addFeatures(features) {\n      var source = this.pointsLayer.getSource();\n      if (features) {\n        source.clear();\n        source.addFeatures(features);\n      }\n    }\n\n    /**\r\n       * 删除features\r\n       * \r\n       * @param {any} feature 需要删除的feature\r\n       * @memberof PointsLayer\r\n       */\n\n  }, {\n    key: 'removeFeatures',\n    value: function removeFeatures(feature) {\n      this.pointsLayer.getSource().removeFeature(feature);\n    }\n\n    /**\r\n       * 设置/更新pointsLayer的样式\r\n       * \r\n       * @memberof PointsLayer\r\n       */\n\n  }, {\n    key: 'updateStyle',\n    value: function updateStyle() {\n      this.pointsLayer.setStyle(function (feature) {\n        // 根据feature里面的数据大小来计算\n        var radius = 10;\n        var color = '';\n        var strokeColor = '';\n        if (feature.get('age') > 80) {\n          radius = 15;\n          color = '#bbbf1e';\n          strokeColor = '#ddd91c';\n        } else if (feature.get('age') > 40) {\n          radius = 10;\n          color = '#a23837';\n          strokeColor = '#d9493d';\n        } else {\n          radius = 5;\n          color = '#02db72';\n          strokeColor = '#08c36d';\n        }\n        return new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.style.Style({\n          image: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.style.Circle({\n            radius: radius,\n            fill: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.style.Fill({\n              // 根据feature里面的数据大小显示不同颜色\n              color: color\n            }),\n            stroke: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.style.Stroke({\n              color: strokeColor,\n              width: 3\n            })\n          })\n        });\n      });\n    }\n  }]);\n\n  return PointsLayer;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PointsLayer);\n\n/***/ }),\n\n/***/ 372:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_openlayers__);\n\n\n\n\n/**\r\n * 弹出框Popup类\r\n * \r\n * @export\r\n * @class Popup\r\n */\n\nvar Popup = function () {\n  /**\r\n   * Creates an instance of Popup.\r\n   * @param {any} container 弹出框元素或容器ID\r\n   * @memberof Popup\r\n   */\n  function Popup(container) {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Popup);\n\n    var ele = typeof container === 'string' ? document.getElementById(container) : container;\n\n    this.overlay = new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.Overlay({\n      element: ele,\n      autoPan: true,\n      autoPanAnimation: {\n        duration: 250\n      }\n    });\n  }\n\n  /**\r\n   * 返回弹出框Popup的实例\r\n   * \r\n   * @returns this.overlay\r\n   * @memberof Popup\r\n   */\n\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(Popup, [{\n    key: 'getOverlay',\n    value: function getOverlay() {\n      return this.overlay;\n    }\n\n    /**\r\n     * 点击关闭按钮，关闭弹出框\r\n     * \r\n     * @param {string|element} ele 关闭按钮元素或ID\r\n     * @param {function} callback 点击关闭按钮后的回调函数\r\n     * @memberof Popup\r\n     */\n\n  }, {\n    key: 'closePopup',\n    value: function closePopup(ele, callback) {\n      var target = typeof ele === 'string' ? document.getElementById(ele) : ele;\n      var self = this;\n      target.onclick = function () {\n        self.overlay.setPosition(undefined);\n        target.blur();\n        callback && callback();\n        return false;\n      };\n    }\n  }]);\n\n  return Popup;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Popup);\n\n/***/ }),\n\n/***/ 373:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_openlayers___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_openlayers__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_openlayers_dist_ol_css__ = __webpack_require__(828);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_openlayers_dist_ol_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_openlayers_dist_ol_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__(191);\n\n\n\n\n\n\n/**\r\n * 地图类\r\n * \r\n * @export\r\n * @class Map\r\n */\n\nvar Map = function () {\n  /**\r\n   * Creates an instance of Map.\r\n   * @param {any} container 地图容器ID\r\n   * @memberof Map\r\n   */\n  function Map(container) {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Map);\n\n    this.map = new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.Map({\n      layers: [new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.layer.Tile({\n        source: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.source.XYZ({\n          url: __WEBPACK_IMPORTED_MODULE_4__config__[\"a\" /* default */].MAP_TILE_URL\n        })\n      })],\n      target: container,\n      controls: __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.control.defaults({\n        attributionOptions: {\n          collapsible: false\n        }\n      }),\n      view: new __WEBPACK_IMPORTED_MODULE_2_openlayers___default.a.View({\n        center: __WEBPACK_IMPORTED_MODULE_4__config__[\"a\" /* default */].CENTER_VIEW,\n        zoom: __WEBPACK_IMPORTED_MODULE_4__config__[\"a\" /* default */].MAP_ZOOM\n      })\n    });\n  }\n\n  /**\r\n   * 返回地图实例\r\n   * \r\n   * @returns \r\n   * @memberof Map\r\n   */\n\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(Map, [{\n    key: 'getMapInstance',\n    value: function getMapInstance() {\n      return this.map;\n    }\n  }]);\n\n  return Map;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Map);\n\n/***/ }),\n\n/***/ 374:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export genGeoJSON */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mockjs__ = __webpack_require__(124);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mockjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_mockjs__);\n\nvar Random = __WEBPACK_IMPORTED_MODULE_0_mockjs___default.a.Random;\n\n/**\r\n * 根据给定的经纬度范围和数量生成一组地理信息\r\n * \r\n * @export function\r\n * @param {any} range 经纬度范围\r\n * @param {any} count 数量\r\n * @returns {object} 地理信息\r\n */\nfunction genGeoJSON(range, count) {\n  var localCount = count;\n  var geo = {\n    type: 'FeatureCollection',\n    crs: {\n      type: 'name',\n      properties: {\n        name: 'EPSG: 4326'\n      }\n    },\n    features: []\n  };\n\n  var features = geo.features;\n  while (localCount--) {\n    features.push({\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: [Random.float(range[0], range[2]), Random.float(range[1], range[3])]\n      },\n      properties: {\n        name: Random.cname(),\n        type: [Random.pick(['涉恐', '涉毒'])],\n        gender: Random.pick('男', '女'),\n        age: Random.integer(30, 100),\n        nation: Random.cword(2) + '族',\n        nativePlace: Random.city(),\n        idCard: Random.id(),\n        portrait: Random.image('51x75')\n      }\n    });\n  }\n  return geo;\n}\n\nvar extent = [13034588.195446936, 4743787.187560575, 13060615.003578058, 4733162.440628944];\nvar geoJson = genGeoJSON(extent, Math.floor(Math.random() * 100));\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  url: '/points',\n  mock: {\n    code: 1,\n    msg: 'success',\n    result: geoJson\n  }\n});\n\n/***/ }),\n\n/***/ 375:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mockjs__ = __webpack_require__(124);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mockjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_mockjs__);\n\n\nvar extent = [13034588.195446936, 4743787.187560575, 13060615.003578058, 4733162.440628944];\n\nvar Random = __WEBPACK_IMPORTED_MODULE_0_mockjs___default.a.Random;\n\nfunction genGeo() {\n  var geo = {\n    type: 'FeatureCollection',\n    crs: {\n      type: 'name',\n      properties: {\n        name: 'EPSG:4326'\n      }\n    },\n    features: []\n  };\n  var features = geo.features;\n  var count = Random.integer(2, 5);\n  while (count--) {\n    features.push({\n      type: 'Feature',\n      properties: __WEBPACK_IMPORTED_MODULE_0_mockjs___default.a.mock({\n        'portrait': '@image(\"40x59\")',\n        'name': '@cname',\n        'gender': Math.random() > 0.5 ? '男' : '女',\n        'nation': '@cword(2)族',\n        'age|20-50': 1,\n        'time': '@date(\"yyyy-MM-dd HH:mm\")',\n        'location': '@county(true)',\n        'reason': '@csentence',\n        'type': '@cword(2, 3)'\n      }),\n      geometry: {\n        type: 'Point',\n        coordinates: [Random.float(extent[0], extent[2]), Random.float(extent[1], extent[3])]\n      }\n    });\n  }\n  return geo;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  url: '/realHeader',\n  mock: {\n    code: 1,\n    msg: 'success',\n    result: function result() {\n      return genGeo();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 78:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mockjs__ = __webpack_require__(124);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mockjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_mockjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__util_typeCheck__ = __webpack_require__(80);\n\n/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-18 09:26:24\r\n * @Description: 全局接口配置\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-09-26 10:49:26\r\n */\n\n\n\n\nvar apiMap = {};\n\n/**\r\n *  当host没有域名时，根据页面的域名补充host\r\n *  @param    {string}  host        地址\r\n *  @param    {Boolean=} isWebsocket 是否是websocket（可选）\r\n *  @return   {string}  补充后的host\r\n */\nfunction normalizeHost(host, isWebsocket) {\n  var hosts = host;\n  if (hosts && hosts.indexOf('//') !== -1) {\n    // 有协议，那么就认为有域名，不进行处理\n    return hosts;\n  }\n  if (hosts === null) {\n    hosts = '';\n  }\n  hosts = location.host + hosts;\n  var normalProtocol = location.protocol;\n  if (isWebsocket) {\n    // 是websocket，根据页面协议猜测对应的ws协议\n    var protocol = 'ws://';\n    if (normalProtocol === 'https:') {\n      // https协议对应wss协议\n      protocol = 'wss://';\n    }\n    hosts = protocol + hosts;\n  } else {\n    hosts = normalProtocol + '//' + hosts;\n  }\n  return hosts;\n}\n\n// 第一个字符不能是数字从而防止匹配到port\nvar paramReg = /:([^/\\d][^/]+)/g;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  /**\r\n   *  加载接口配置\r\n   *  @param    {Object}  apiConfigMap 接口配置\r\n   */\n  merge: function merge(apiConfigMap) {\n    var me = this;\n    var host = void 0;\n    var websocketHost = void 0;\n    var mock = __WEBPACK_IMPORTED_MODULE_2__config__[\"a\" /* default */].get('mock');\n    if (__WEBPACK_IMPORTED_MODULE_2__config__[\"a\" /* default */].get('proxy')) {\n      // 为true，启用代理\n      host = __WEBPACK_IMPORTED_MODULE_2__config__[\"a\" /* default */].get('proxyHost');\n      websocketHost = __WEBPACK_IMPORTED_MODULE_2__config__[\"a\" /* default */].get('websocketProxyHost');\n    } else {\n      // 为false，不用代理\n      host = normalizeHost(__WEBPACK_IMPORTED_MODULE_2__config__[\"a\" /* default */].get('host'));\n      websocketHost = normalizeHost(__WEBPACK_IMPORTED_MODULE_2__config__[\"a\" /* default */].get('websocketHost'), true);\n    }\n    for (var key in apiConfigMap) {\n      if (!Object.prototype.hasOwnProperty.call(apiConfigMap, key) || !{}.hasOwnProperty.call(apiConfigMap, key)) {\n        continue;\n      }\n      // 默认不是websocket接口\n      var isWebsocket = false;\n      var apiConfig = apiConfigMap[key];\n      var ajaxConfig = apiConfig.config || {};\n      var url = apiConfig.url;\n      if (apiConfig.isWebsocket === true) {\n        // 接口声明是websocket接口\n        isWebsocket = true;\n      }\n      if (!ajaxConfig.type) {\n        // 默认method为get\n        ajaxConfig.type = 'get';\n      }\n      ajaxConfig.type = ajaxConfig.type.toLowerCase();\n      apiMap[key] = {\n        // 如果是websocket接口，则需要用websocketHost\n        // 否则用host\n        url: (isWebsocket ? websocketHost : host) + url,\n        config: ajaxConfig\n      };\n      if (mock && apiConfig.mock) {\n        // 需要mock，并且api存在mock配置\n        __WEBPACK_IMPORTED_MODULE_1_mockjs___default.a.mock(me.reg(key), ajaxConfig.type, apiConfig.mock);\n      }\n    }\n  },\n\n  /**\r\n   *  根据接口的名称，获取未绑定数据的url\r\n   *  @param    {string}  key 接口的名称\r\n   *  @return   {string}  接口的url\r\n   */\n  rawUrl: function rawUrl(key) {\n    return apiMap[key].url;\n  },\n\n  /**\r\n   *  根据接口的名称，获取绑定数据后的url\r\n   *  @param    {string}  key 接口的名称\r\n   *  @param    {Object=}  data 如果接口url上定义的变量名存在于data中，就会进行转换（可选）\r\n   *  @return   {string}  接口转换后的url\r\n   */\n  url: function url(key) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var me = this;\n    var url = me.rawUrl(key);\n\n    return url.replace(paramReg, function (str, paramName) {\n      var val = data[paramName];\n      if (val === undefined) {\n        val = 'null';\n      }\n      return global.encodeURIComponent(val);\n    });\n  },\n\n  /**\r\n   *  根据接口的名称，获取用来描述接口的url的正则表达式\r\n   *  @param    {string}  key 接口的名称\r\n   *  @return   {RegExp}  描述url的正则表达式\r\n   */\n  reg: function reg(key) {\n    var me = this;\n    var rawUrl = me.rawUrl(key);\n    var regStr = rawUrl.replace(/\\./g, '\\\\.').replace(paramReg, '[^/]+');\n    return new RegExp('^' + regStr + '(\\\\?.*)?$');\n  },\n\n  /**\r\n   *  根据接口的名称，获取接口的ajax配置\r\n   *  @param    {string}  key 接口名称\r\n   *  @return   {Object}  ajax配置\r\n   */\n  config: function config(key) {\n    return apiMap[key] && apiMap[key].config;\n  },\n\n  /**\r\n   *  根据接口的名称，过滤数据中能绑定到url的数据\r\n   *  @param    {string}  key  接口的名称\r\n   *  @param    {Object}  data 数据\r\n   *  @return   {Object}  无法绑定到url的剩余数据\r\n   */\n  filterData: function filterData(key, data) {\n    var me = this;\n    if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__util_typeCheck__[\"d\" /* isObject */])(data)) {\n      return data;\n    }\n    var resData = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, data);\n    var rawUrl = me.rawUrl(key);\n    var execRes = void 0;\n    while (execRes = paramReg.exec(rawUrl)) {\n      var paramName = execRes[1];\n      delete resData[paramName];\n    }\n    return resData;\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(27)))\n\n/***/ }),\n\n/***/ 79:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-24 13:51:21\r\n * @Description: 全局配置\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-08-09 10:13:43\r\n */\n\nvar search = global.location.search;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  // 是否使用mock模式，在mock模式下向服务器的请求使用mockjs模拟\n  // hycharts默认调用mock数据，不需要再加mock标识\n  mock: search.indexOf('mock') === -1,\n  // 模拟websocket时，消息的推送间隔(毫秒)\n  mockInterval: 3500,\n  // 轮询请求时的时间间隔(毫秒)\n  fetchInterval: 3000,\n  // 是否使用proxy模式，在proxy模式下会使用proxy的url来替换原来的url\n  proxy: search.indexOf('proxy') !== -1,\n  // 线上服务器域名，当proxy为false时，所有ajax请求都会发送到这个域名\n  host: '/api',\n  // websocket线上服务器域名，当proxy为false时，所有websocket都会连接到这个域名\n  websocketHost: 'ws://online.com',\n  // 代理服务器域名，当proxy为true时，所有ajax请求都会发送到这个域名,主要用于前后台联调\n  proxyHost: 'http://192.168.1.199:3000/api',\n  // websocket代理服务器域名，当proxy为true时，所有websocket都会连接到这个域名,主要用于前后台联调\n  websocketProxyHost: 'ws://offline.com',\n  // 是否使用zoom模式，在zoom模式下页面会根据窗口的宽高使用transform调整\n  mapHost: 'http://192.168.1.16:10088/mapdata/cq',\n  // 地图路径\n  zoom: false,\n  // 固定的页面宽\n  pageWidth: 1920,\n  // 固定的页面高\n  pageHeight: 1080\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(27)))\n\n/***/ }),\n\n/***/ 80:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export is */\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = isObject;\n/* unused harmony export isString */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = isFunction;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = isNumber;\n/* unused harmony export isBoolean */\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = isArray;\n/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-31 16:09:06\r\n * @Description: 类型检查\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-09-26 10:33:15\r\n */\n\n/**\r\n *  检查值是否和要求的类型匹配\r\n *  @param    {*}  val        等待检查的值\r\n *  @param    {string}  expectType 期望类型\r\n *  @return   {boolean} 为true说明类型检查通过，为false说明类型检查不通过\r\n */\nfunction is(val, expectType) {\n  return Object.prototype.toString.call(val) === '[object ' + expectType + ']';\n}\n\n/**\r\n *  检查是否是Object类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Object类型，为false说明值不是Object类型\r\n */\nfunction isObject(val) {\n  return is(val, 'Object');\n}\n\n/**\r\n *  检查是否是String类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是String类型，为false说明值不是String类型\r\n */\nfunction isString(val) {\n  return is(val, 'String');\n}\n\n/**\r\n *  检查是否是Function类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Function类型，为false说明值不是Function类型\r\n */\nfunction isFunction(val) {\n  return is(val, 'Function');\n}\n\n/**\r\n *  检查是否是Number类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Number类型，为false说明值不是Number类型\r\n */\nfunction isNumber(val) {\n  return is(val, 'Number');\n}\n\n/**\r\n *  检查是否是Boolean类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Boolean类型，为false说明值不是Boolean类型\r\n */\nfunction isBoolean(val) {\n  return is(val, 'Boolean');\n}\n\n/**\r\n *  检查是否是Array类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Array类型，为false说明值不是Array类型\r\n */\nfunction isArray(val) {\n  return is(val, 'Array');\n}\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = zoom;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = adaptZoom;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = originToDeformation;\n/* unused harmony export deformationToOrigin */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__zoom_css__ = __webpack_require__(172);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__zoom_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__zoom_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_jquery__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_jquery__);\n/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-18 09:20:07\r\n * @Description: 对document.body进行缩放，使得body尺寸始终保持config中声明的尺寸\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-08-08 13:25:11\r\n */\n\n\n\n\nvar body = __WEBPACK_IMPORTED_MODULE_2_jquery___default()('body');\n\nvar lastScale = [1, 1];\n\n/**\r\n *  根据当前窗口大小缩放页面\r\n */\nfunction zoom() {\n  var x = window.innerWidth / __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].get('pageWidth');\n  var y = window.innerHeight / __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].get('pageHeight');\n  lastScale = [x, y];\n  body.css('transform', 'scale(' + x + ', ' + y + ')');\n}\n\n/**\r\n *  开启zoom\r\n */\nfunction adaptZoom() {\n  body.addClass('zoomify').css('width', __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].get('pageWidth')).css('height', __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].get('pageHeight'));\n}\n\n/**\r\n *  将原始位置转换为zoom后的位置\r\n *  @param    {Array.number}  origin 原始位置\r\n *  @return   {Array.number}  zoom后的位置\r\n */\nfunction originToDeformation(origin) {\n  return [origin[0] * lastScale[0], origin[1] * lastScale[1]];\n}\n\n/**\r\n *  将zoom后的位置转换为原始位置\r\n *  @param    {Array.number}  deformation zoom后的位置\r\n *  @return   {Array.number}  原始位置\r\n */\nfunction deformationToOrigin(deformation) {\n  return [deformation[0] / lastScale[0], deformation[1] / lastScale[1]];\n}\n\n/***/ })\n\n},[368]);\n\n\n// WEBPACK FOOTER //\n// static/js/testMap.f4d2ad2f3c11d074f75c.js","/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-18 09:11:51\r\n * @Description: 初始化应用\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-07-20 10:56:29\r\n */\r\n\r\n// 样式重置\r\nimport 'reset-css'\r\n// 加载公用的css\r\nimport './common/common.css'\r\n\r\nimport { adaptZoom, default as zoom } from '@/util/zoom/zoom'\r\n\r\nimport config from '@/config'\r\nimport apis from '@/apis'\r\n\r\nimport globalConfig from './base.config'\r\n\r\nexport default {\r\n  /**\r\n   *  执行初始化操作，然后执行app的初始化逻辑\r\n   *  @param    {Object}  app 页面实例\r\n   */\r\n  load(app) {\r\n    const me = this\r\n\r\n    // 将全局配置合并到全局api\r\n    config.merge(globalConfig)\r\n    // 将应用配置合并到全局api\r\n    config.merge(app.config)\r\n\r\n    // 将应用的接口配置合并到全局api\r\n    apis.merge(app.apis)\r\n\r\n    me.initZoom()\r\n\r\n    // 初始化app\r\n    app.init()\r\n  },\r\n  /**\r\n   *  根据config，判断是否需要执行zoom逻辑\r\n   */\r\n  initZoom() {\r\n    if(config.get('zoom')) {\r\n      // 为true，启用自动缩放\r\n      adaptZoom()\r\n      window.addEventListener('resize', zoom)\r\n      zoom()\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader/loader.js","module.exports = __webpack_public_path__ + \"static/img/header.fd3cfab.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/apps/testMap/images/header.png\n// module id = 1167\n// module chunks = 13","/**\r\n * @Author:      baizn\r\n * @DateTime:    2017-01-17 09:24:27\r\n * @Description: 通用工具方法\r\n * @Last Modified By:   baizn\r\n * @Last Modified Time:    2017-01-17 09:24:27\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n/**\r\n * @describe [错误提示]\r\n * @param    {[type]}   data [提示内容]\r\n * @return {boolean} false\r\n */\r\nexport const errorTooltip = (data) => {\r\n  let errorTpl = require('./errorTips/errorDialog.hbs')\r\n  let html = errorTpl({\r\n    data\r\n  }) \r\n  $('.error-dialog').html(html)\r\n  $('#errorDialog').fadeIn(50)\r\n  // 关闭错误提示\r\n  $('#errorDialog').on('click', '.close-model', function(evt){\r\n    evt.stopPropagation()\r\n    evt.preventDefault()\r\n    $('#errorDialog').fadeOut(50)\r\n    $('.error-dialog').empty()\r\n  })\r\n  return false\r\n}\r\n\r\n/**\r\n *  生成一个延迟函数\r\n *  @param    {Function}  func        需要延迟执行的函数\r\n *  @param    {number}  delayMillis 延迟执行的毫秒数\r\n *  @return   {Function}  延迟函数\r\n */\r\nexport function delay(func, delayMillis) {\r\n  /**\r\n   * 延迟函数\r\n   * @param    {boolean=}  immediate 是否立即执行（可选，默认为false）\r\n   * @return {function} 延时函数\r\n   */\r\n  return function delayFunc(immediate) {\r\n    if(immediate === true) {\r\n      func()\r\n    } else {\r\n      setTimeout(func, delayMillis)\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/util.js","/**\r\n * @Author:      baizn\r\n * @DateTime:    2017-03-20 13:36:18\r\n * @Description: Description\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-09-26 10:49:47\r\n */\r\n\r\nimport $ from 'jquery'\r\nimport { errorTooltip, delay } from './util'\r\nimport { isFunction, isNumber, isArray } from './typeCheck'\r\nimport apis from '@/apis'\r\nimport config from '@/config'\r\nimport ReconnectingWebSocket from 'reconnecting-websocket'\r\n\r\n/**\r\n * 普通AJAX请求\r\n *  如果向后端传递的数据需要是json，那么接口.config.contentType应为'application/json; charset=UTF-8'\r\n *  如果向后端传递的数据需要传递文件，那么接口.config.contentType应为'multipart/form-data; charset=UTF-8'\r\n * \r\n * @export 对外暴露方法\r\n * @param {string} apiName 接口名称\r\n * @param {object} [data={}] 接口参数 可选\r\n * @param {function} callback 回调函数\r\n * @returns {Boolean} false\r\n */\r\nexport function fetch(apiName, data = {}, callback) {\r\n  if(arguments.length === 2 && isFunction(data)) {\r\n    // 只传了apiName和callback\r\n    callback = data\r\n    data = {}\r\n  }\r\n  const ajaxConfig = apis.config(apiName)\r\n  const extraAjaxConfig = {}\r\n  let ajaxData = apis.filterData(apiName, data)\r\n  if (ajaxConfig.contentType) {\r\n    const contentType = ajaxConfig.contentType\r\n    if (contentType.indexOf('application/json') != -1) {\r\n      // application/json的要自己将传递的数据转换成字符串\r\n      ajaxData = JSON.stringify(ajaxData)\r\n    } else if (contentType.indexOf('multipart/form-data') != -1) {\r\n      // 有文件要上传，使用formData\r\n      // 把contentType置为false，由xhr自己生成，避免使用者忘记设置boundary\r\n      extraAjaxConfig.contentType = false\r\n      // xhr可直接发送formData，不用jquery重复处理数据\r\n      extraAjaxConfig.processData = false\r\n      const formData = new FormData()\r\n      Object.keys(ajaxData)\r\n        .forEach(key => {\r\n          const val = ajaxData[key]\r\n          if (isArray(val)) {\r\n            val.forEach(val => {\r\n              formData.append(key, val)\r\n            })\r\n          } else {\r\n            formData.append(key, val)\r\n          }\r\n        })\r\n      extraAjaxConfig.data = formData\r\n    }\r\n  }\r\n  return $.ajax({\r\n    url: apis.url(apiName, data),\r\n    dataType: 'json',\r\n    data: ajaxData,\r\n    ...ajaxConfig,\r\n    ...extraAjaxConfig\r\n  }).done((response) => {\r\n    if(!response.code){\r\n      return errorTooltip( `调后台接口失败:${ response.msg }` )\r\n    }\r\n    callback && callback(response.result)\r\n  }).fail(() => {\r\n    return errorTooltip( '请求失败: 系统错误' )\r\n  })\r\n}\r\n\r\n/**\r\n *  向指定api循环发送发送请求\r\n *  @param    {string}   apiName api名称\r\n *  @param    {object=}   data    请求参数（可选）\r\n *  @param    {Function}    cb    处理响应数据的回调\r\n *  @param    {number=}    interval    轮询间隔（毫秒）（可选，默认为配置值）\r\n *  @return   {Object}   用于对轮询状态进行操作的实例\r\n */\r\nexport function fetchInterval(apiName, data, cb, interval) {\r\n  const argumentsLength = arguments.length\r\n  const defaultInterval = config.get('fetchInterval')\r\n  if (argumentsLength === 2) {\r\n    // 只传了2个参数\r\n    // 没传data，没传interval\r\n    cb = data\r\n    data = null\r\n    interval = null\r\n  } else if (argumentsLength === 3) {\r\n    // 只传了3个参数\r\n    if (isFunction(cb)) {\r\n      // 没有传interval\r\n      interval = null\r\n    } else if (isNumber(cb)) {\r\n      // 没有传data\r\n      interval = cb\r\n      cb = data\r\n      data = null\r\n    }\r\n  }\r\n\r\n  data = data || {}\r\n  interval = interval || defaultInterval\r\n\r\n  let hasClosed = false\r\n  const delayFetchInterval = delay(\r\n    function() {\r\n      if (hasClosed) {\r\n        return\r\n      }\r\n      fetch(apiName, data, cb)\r\n        .always(delayFetchInterval)\r\n    },\r\n    interval\r\n  )\r\n  delayFetchInterval(true)\r\n  return {\r\n    // 停止轮询\r\n    close() {\r\n      hasClosed = true\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n *  建立websocket链接\r\n *  @param    {string}   apiName api名称\r\n *  @param    {Object=}   data    请求参数（可选）\r\n *  @param    {Function} cb      处理推送数据的回调\r\n *  @return   {Websocket}   websocket实例\r\n */\r\nexport function fetchSocket(apiName, data, cb) {\r\n  if (arguments.length === 2 && isFunction(data)) {\r\n    // 只传了2个参数，并且第2个参数是函数，说明第二个参数是cb\r\n    cb = data\r\n    data = {}\r\n  }\r\n  if (config.get('mock')) {\r\n    // 需要mock，那么使用fetchInterval模拟\r\n    const fakeWs = fetchInterval(apiName, data, cb)\r\n    return fakeWs\r\n  }\r\n  // 不需要mock，创建真实的websocket\r\n  const ws = new ReconnectingWebSocket(\r\n    apis.url(apiName, data)\r\n  )\r\n  ws.onmessage = cb\r\n  ws.onclose = function () {\r\n    this.close()\r\n  }\r\n  // 当页面被卸载时，需要断开websocket\r\n  window.addEventListener(\r\n    'unload',\r\n    function close() {\r\n      window.removeEventListener('unload', close)\r\n      ws.close()\r\n    }\r\n  )\r\n  return ws\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/request.js","var Handlebars = require(\"E:\\\\workSpaces\\\\hycharts-simple\\\\node_modules\\\\handlebars\\\\runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"model-bg\\\" id=\\\"errorDialog\\\">\\r\\n  <div class=\\\"model-container\\\">\\r\\n    <div class=\\\"model-body\\\">\"\n    + container.escapeExpression(((helper = (helper = helpers.data || (depth0 != null ? depth0.data : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"data\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\r\\n        \\r\\n    <div class=\\\"close-model\\\"></div>\\r\\n  </div>\\r\\n</div>\";\n},\"useData\":true});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/util/errorTips/errorDialog.hbs\n// module id = 173\n// module chunks = 12 13","export default {\r\n  MAP_TILE_URL: 'https://api.mapbox.com/styles/v1/baizn/cj60h9n5b1o1t2smjct2ack3d/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYmFpem4iLCJhIjoiY2o1aXkxbDk4MWwwaDMzbW5oaDNxN240bCJ9.RKUQwXa57CuEaYhZBafuqw',\r\n  CENTER_VIEW: [13046665.245916, 4739506.713976609],\r\n  MAP_ZOOM: 13\r\n} \r\n\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/config.js","\r\nimport Map from'./map'\r\nimport PointsLayer from'./layers/pointsLayer'\r\nimport PersonHeaderLayer from'./layers/personHeaderLayer'\r\nimport Popup from'./layers/popup'\r\nimport BlurPointsLayer from'./layers/blurPointsLayer'\r\nimport{ fetch, fetchInterval } from'@/util/request'\r\nimport ol from'openlayers'\r\n\r\nconst geoJSONFormatter = new ol.format.GeoJSON({\r\n  featureProjection: 'EPSG: 3857'\r\n})\r\n\r\nexport default class MapIndex {\r\n  constructor() {\r\n    const map = new Map('map')\r\n    this.mapInstance = map.getMapInstance()\r\n\r\n    this.pointsLayer = new PointsLayer()\r\n    this.personHeaderLayer = new PersonHeaderLayer()\r\n    this.popup = new Popup('popup')\r\n    this.blurPointsLayer = new BlurPointsLayer()\r\n\r\n    const blurPointsInstance = this.blurPointsLayer.getLayer()\r\n    this.mapInstance.addLayer(blurPointsInstance)\r\n\r\n    const pointsLayerInstance = this.pointsLayer.getLayer()\r\n    this.mapInstance.addLayer(pointsLayerInstance)\r\n\r\n    const personHeaderLayerInstance = this.personHeaderLayer.getLayer()\r\n    this.mapInstance.addLayer(personHeaderLayerInstance)\r\n\r\n    const popupInstance = this.popup.getOverlay()\r\n    this.mapInstance.addOverlay(popupInstance)\r\n  }\r\n\r\n  /**\r\n   * 渲染散点layer\r\n   * \r\n   * @memberof MapIndex\r\n   */\r\n  renderPoints() {\r\n    const self = this\r\n    fetch('MapPointsFetch', (data) => {\r\n      const features = geoJSONFormatter.readFeatures(data)\r\n      self.pointsLayer.addFeatures(features)\r\n      \r\n      self.pointsLayer.updateStyle()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 渲染人员头像layer\r\n   * \r\n   * @memberof MapIndex\r\n   */\r\n  renderPersonHeader() {\r\n    const self = this\r\n    fetchInterval('RealHeaderFetch', (data) => {\r\n      const features = geoJSONFormatter.readFeatures(data)\r\n      self.personHeaderLayer.addFeatures(features)\r\n      self.personHeaderLayer.updateStyle()\r\n      setTimeout(\r\n        () => {\r\n          features.forEach(feature => {\r\n            if(!feature.get('isVisibiled')) {\r\n              self.personHeaderLayer.removeFeature(feature)\r\n            }\r\n          })\r\n        }, 4000\r\n      )\r\n    }, 5000)\r\n  }\r\n\r\n  /**\r\n   * 绑定地图上点击事件\r\n   * \r\n   * @memberof MapIndex\r\n   */\r\n  bindClickEvent() {\r\n    const self = this\r\n    const map = self.mapInstance\r\n    \r\n    map.on('pointermove', (evt) => {\r\n      const hit = map.hasFeatureAtPixel(evt.pixel)\r\n      map.getViewport().style.cursor = hit ? 'pointer' : ''\r\n    })\r\n\r\n    map.on('singleclick', (evt) => {\r\n      const{ feature, layer } = map.forEachFeatureAtPixel(\r\n        evt.pixel,\r\n        (subFeature, subLayer) => {\r\n          /**\r\n           * 比较当前操作的是哪个layer，有两种实现方式:\r\n           * 1、使用实例比较，layer === self.pointsLayer.getLayer()\r\n           * 2、在new layer时候添加自定义属性，如layerName，标识当前layer，\r\n           *  使用layer.get('layerName')获取layer标识值\r\n           */\r\n           \r\n          return{ feature: subFeature, layer: subLayer }\r\n        }\r\n      )\r\n      if(!feature) {\r\n        return false\r\n      }\r\n      \r\n      const isPointLayer = layer === self.pointsLayer.getLayer()\r\n      if(isPointLayer) {\r\n        self.blurPointsLayer.addFeature(feature)\r\n      }\r\n\r\n      // if(choosedFeatures && choosedFeatures != feature) {\r\n      //   choosedFeatures.set('isVisibiled', false)\r\n      //   self.personHeaderLayer.removeFeature(choosedFeatures)\r\n      // }\r\n      // choosedFeatures = feature\r\n      feature.set('isVisibiled', true)\r\n      self.popup.closePopup('popup-closer', () => {\r\n        feature.set('isVisibiled', false)\r\n        if(isPointLayer) {\r\n          self.blurPointsLayer.removeFeature(feature)\r\n        } else{\r\n          self.personHeaderLayer.removeFeature(feature)\r\n        }\r\n        \r\n        map.removeOverlay(self.popup)\r\n      })\r\n\r\n      // 加载模板\r\n      const content = document.getElementById('popup-content')\r\n      content.innerHTML = `<p>You name:</p><code>${feature.get('name')}</code>`\r\n      self.popup.getOverlay().setPosition(evt.coordinate)\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/map/index.js","\r\nimport MapPointsFetch from './mapPoints'\r\nimport RealHeaderFetch from './realHeader'\r\n\r\nexport default {\r\n  MapPointsFetch,\r\n  RealHeaderFetch\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/mock/index.js","\r\nimport loader from '@/loader/loader'\r\nimport apis from './mock'\r\nimport './index.css'\r\nimport config from './config'\r\nimport MapIndex from './map/'\r\n\r\nloader.load({\r\n  apis: apis,\r\n  config: config,\r\n  init() {\r\n    const map = new MapIndex()\r\n    map.renderPoints()\r\n    map.renderPersonHeader()\r\n    map.bindClickEvent()\r\n  }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/index.js","import ol from 'openlayers'\r\n\r\nconst createBlurCircle = (r, color, shadowBlur) => {\r\n  const canvas = document.createElement('canvas')\r\n  const realR = Math.ceil(r + shadowBlur * 1.3)\r\n  const realDiameter = realR * 2\r\n\r\n  canvas.width = realDiameter\r\n  canvas.height = realDiameter\r\n\r\n  const ctx = canvas.getContext('2d')\r\n\r\n  ctx.shadowColor = color\r\n  ctx.shadowBlur = shadowBlur\r\n  ctx.fillStyle = color\r\n\r\n  ctx.beginPath()\r\n  ctx.arc(realR, realR, r, 0, 2 * Math.PI)\r\n  ctx.closePath()\r\n\r\n  ctx.fill()\r\n\r\n  return canvas\r\n}\r\n\r\nexport default class BlurPointsLayer {\r\n  /**\r\n   * Creates an instance of BlurPointsLayer.\r\n   * @memberof BlurPointsLayer\r\n   */\r\n  constructor() {\r\n    this.layer = new ol.layer.Vector({\r\n      source: new ol.source.Vector(),\r\n      style(feature) {\r\n        // 根据feature里面的数据大小来计算\r\n        let radius = 10\r\n        if(feature.get('age') > 80) {\r\n          radius = 15\r\n        } else if(feature.get('age') > 40) {\r\n          radius = 10\r\n        } else {\r\n          radius = 5\r\n        }\r\n        const img = createBlurCircle(radius, '#fff', 10)\r\n        return new ol.style.Style({\r\n          image: new ol.style.Icon({\r\n            img, \r\n            imgSize: [img.width, img.height]\r\n          })\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 获取BlurPointsLayer的layer实例\r\n   * \r\n   * @returns this.layer\r\n   * @memberof BlurPointsLayer\r\n   */\r\n  getLayer() {\r\n    return this.layer\r\n  }\r\n\r\n  /**\r\n   * 将feature添加到layer中\r\n   * \r\n   * @param {any} feature 需要添加的feature\r\n   * @memberof BlurPointsLayer\r\n   */\r\n  addFeature(feature) {\r\n    this.getLayer()\r\n      .getSource().addFeature(feature)\r\n  }\r\n\r\n  /**\r\n   * 删除对应的feature\r\n   * \r\n   * @param {any} feature 要删除的feature\r\n   * @memberof BlurPointsLayer\r\n   */\r\n  removeFeature(feature) {\r\n    this.getLayer()\r\n      .getSource().removeFeature(feature)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/map/layers/blurPointsLayer.js","/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-17 15:29:37\r\n * @Description: 全局配置\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-07-20 11:09:36\r\n */\r\nlet config = {}\r\n\r\nexport default {\r\n  /**\r\n   *  将源配置覆盖到全局配置\r\n   *  @param    {Object}  srcConfig 源配置，将会覆盖到全局配置\r\n   */\r\n  merge(srcConfig) {\r\n    config = {\r\n      ...config,\r\n      ...srcConfig\r\n    }\r\n  },\r\n  /**\r\n   *  获取某个配置项的值\r\n   *  @param    {string}  key 配置项的key\r\n   *  @return   {*}  配置项的值\r\n   */\r\n  get(key) {\r\n    return config[key]\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","import ol from 'openlayers'\r\nimport headerPng from '../../images/header.png'\r\n\r\nexport default class PersonHeaderLayer {\r\n  /**\r\n   * Creates an instance of PersonHeaderLayer.\r\n   * @memberof PersonHeaderLayer\r\n   */\r\n  constructor() {\r\n    this.personHeaderLayer = new ol.layer.Vector({\r\n      source: new ol.source.Vector()\r\n    })\r\n    this.source = this.personHeaderLayer.getSource()\r\n  }\r\n\r\n  /**\r\n   * 获取PersonHeaderLayer的实例\r\n   * \r\n   * @returns this.personHeaderLayer\r\n   * @memberof PersonHeaderLayer\r\n   */\r\n  getLayer() {\r\n    return this.personHeaderLayer\r\n  }\r\n\r\n  /**\r\n   * 将feature添加到PersonHeaderLayer中\r\n   * \r\n   * @param {any} features 需要添加的feature\r\n   * @memberof PersonHeaderLayer\r\n   */\r\n  addFeatures(features) {\r\n    // this.source.clear()\r\n    this.source.addFeatures(features)\r\n  }\r\n\r\n  /**\r\n   * 删除feature\r\n   * \r\n   * @param {any} feature 需要删除的feature\r\n   * @memberof PersonHeaderLayer\r\n   */\r\n  removeFeature(feature) {\r\n    this.source.removeFeature(feature)\r\n  }\r\n\r\n  /**\r\n   * 设置/更新PersonHeaderLayer的样式\r\n   * \r\n   * @memberof PersonHeaderLayer\r\n   */\r\n  updateStyle() {\r\n    this.personHeaderLayer.setStyle(feature => {\r\n      return new ol.style.Style({\r\n        image: new ol.style.Icon({\r\n          anchorXUnits: 'pixels',\r\n          anchorYUnits: 'pixels',\r\n          src: feature.get('img') || headerPng\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 显示人员散点layer\r\n   * \r\n   * @memberof PersonHeaderLayer\r\n   */\r\n  show() {\r\n    this.personHeaderLayer.setVisible(true)\r\n  }\r\n\r\n  /**\r\n   * 隐藏人员散点layer\r\n   * \r\n   * @memberof PersonHeaderLayer\r\n   */\r\n  hide() {\r\n    this.personHeaderLayer.setVisible(false)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/map/layers/personHeaderLayer.js","import ol from 'openlayers'\r\n\r\n/**\r\n * 散点类PointsLayer\r\n * \r\n * @export\r\n * @class PointsLayer\r\n */\r\nexport default class PointsLayer {\r\n  constructor() {\r\n    this.pointsLayer = new ol.layer.Vector({\r\n      source: new ol.source.Vector(),\r\n      layerName: 'points'\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 获取PointsLayer的实例\r\n   * \r\n   * @returns this.pointsLayer\r\n   * @memberof PointsLayer\r\n   */\r\n  getLayer() {\r\n    return this.pointsLayer\r\n  }\r\n\r\n  /**\r\n     * 在PointsLayer上添加features\r\n     * \r\n     * @param {any} features 根据数据生成的features\r\n     * @memberof PointsLayer\r\n     */\r\n  addFeatures(features) {\r\n    const source = this.pointsLayer.getSource()\r\n    if(features) {\r\n      source.clear()\r\n      source.addFeatures(features)\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 删除features\r\n     * \r\n     * @param {any} feature 需要删除的feature\r\n     * @memberof PointsLayer\r\n     */\r\n  removeFeatures(feature) {\r\n    this.pointsLayer.getSource()\r\n      .removeFeature(feature)\r\n  }\r\n\r\n  /**\r\n     * 设置/更新pointsLayer的样式\r\n     * \r\n     * @memberof PointsLayer\r\n     */\r\n  updateStyle() {\r\n    this.pointsLayer.setStyle(feature => {\r\n      // 根据feature里面的数据大小来计算\r\n      let radius = 10\r\n      let color = ''\r\n      let strokeColor = ''\r\n      if(feature.get('age') > 80) {\r\n        radius = 15\r\n        color = '#bbbf1e'\r\n        strokeColor = '#ddd91c'\r\n      } else if(feature.get('age') > 40) {\r\n        radius = 10\r\n        color = '#a23837'\r\n        strokeColor = '#d9493d'\r\n      } else {\r\n        radius = 5\r\n        color = '#02db72'\r\n        strokeColor = '#08c36d'\r\n      }\r\n      return new ol.style.Style({\r\n        image: new ol.style.Circle({\r\n          radius,\r\n          fill: new ol.style.Fill({\r\n            // 根据feature里面的数据大小显示不同颜色\r\n            color: color\r\n          }),\r\n          stroke: new ol.style.Stroke({\r\n            color: strokeColor,\r\n            width: 3\r\n          })\r\n        })\r\n      })\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/map/layers/pointsLayer.js","import ol from 'openlayers'\r\n\r\n/**\r\n * 弹出框Popup类\r\n * \r\n * @export\r\n * @class Popup\r\n */\r\nexport default class Popup {\r\n  /**\r\n   * Creates an instance of Popup.\r\n   * @param {any} container 弹出框元素或容器ID\r\n   * @memberof Popup\r\n   */\r\n  constructor(container) {\r\n    const ele = typeof container === 'string' ?\r\n      document.getElementById(container) : container\r\n\r\n    this.overlay = new ol.Overlay({\r\n      element: ele,\r\n      autoPan: true,\r\n      autoPanAnimation: {\r\n        duration: 250\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 返回弹出框Popup的实例\r\n   * \r\n   * @returns this.overlay\r\n   * @memberof Popup\r\n   */\r\n  getOverlay() {\r\n    return this.overlay\r\n  }\r\n\r\n  /**\r\n   * 点击关闭按钮，关闭弹出框\r\n   * \r\n   * @param {string|element} ele 关闭按钮元素或ID\r\n   * @param {function} callback 点击关闭按钮后的回调函数\r\n   * @memberof Popup\r\n   */\r\n  closePopup(ele, callback) {\r\n    const target = typeof ele === 'string' ?\r\n      document.getElementById(ele) : ele\r\n    const self = this\r\n    target.onclick = () => {\r\n      self.overlay.setPosition(undefined)\r\n      target.blur()\r\n      callback && callback()\r\n      return false\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/map/layers/popup.js","import ol from 'openlayers'\r\nimport 'openlayers/dist/ol.css'\r\nimport config from '../config'\r\n\r\n/**\r\n * 地图类\r\n * \r\n * @export\r\n * @class Map\r\n */\r\nexport default class Map {\r\n  /**\r\n   * Creates an instance of Map.\r\n   * @param {any} container 地图容器ID\r\n   * @memberof Map\r\n   */\r\n  constructor(container) {\r\n    this.map = new ol.Map({\r\n      layers: [\r\n        new ol.layer.Tile({\r\n          source: new ol.source.XYZ({\r\n            url: config.MAP_TILE_URL\r\n          })\r\n        })\r\n      ],\r\n      target: container,\r\n      controls: ol.control.defaults({\r\n        attributionOptions: {\r\n          collapsible: false\r\n        }\r\n      }),\r\n      view: new ol.View({\r\n        center: config.CENTER_VIEW,\r\n        zoom: config.MAP_ZOOM\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 返回地图实例\r\n   * \r\n   * @returns \r\n   * @memberof Map\r\n   */\r\n  getMapInstance() {\r\n    return this.map\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/map/map.js","import Mock from 'mockjs'\r\nconst Random = Mock.Random\r\n\r\n/**\r\n * 根据给定的经纬度范围和数量生成一组地理信息\r\n * \r\n * @export function\r\n * @param {any} range 经纬度范围\r\n * @param {any} count 数量\r\n * @returns {object} 地理信息\r\n */\r\nexport function genGeoJSON(range, count) {\r\n  let localCount = count\r\n  const geo = {\r\n    type: 'FeatureCollection',\r\n    crs: {\r\n      type: 'name',\r\n      properties: {\r\n        name: 'EPSG: 4326'\r\n      }\r\n    },\r\n    features: []\r\n  }\r\n\r\n  const features = geo.features\r\n  while(localCount--) {\r\n    features.push({\r\n      type: 'Feature',\r\n      geometry: {\r\n        type: 'Point',\r\n        coordinates: [\r\n          Random.float(range[0], range[2]),\r\n          Random.float(range[1], range[3])\r\n        ]\r\n      },\r\n      properties: {\r\n        name: Random.cname(),\r\n        type: [Random.pick(['涉恐', '涉毒'])],\r\n        gender: Random.pick('男', '女'),\r\n        age: Random.integer(30, 100),\r\n        nation: Random.cword(2) + '族',\r\n        nativePlace: Random.city(),\r\n        idCard: Random.id(),\r\n        portrait: Random.image('51x75')\r\n      }\r\n    })\r\n  }\r\n  return geo\r\n}\r\n\r\nconst extent = [13034588.195446936, 4743787.187560575, \r\n  13060615.003578058, 4733162.440628944]\r\nconst geoJson = genGeoJSON(extent, Math.floor(Math.random() * 100))\r\n\r\nexport default {\r\n  url: '/points',\r\n  mock: {\r\n    code: 1,\r\n    msg: 'success',\r\n    result: geoJson\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/mock/mapPoints.js","import Mock from 'mockjs'\r\n\r\nconst extent = [13034588.195446936, 4743787.187560575, \r\n  13060615.003578058, 4733162.440628944]\r\n\r\nconst Random = Mock.Random\r\n\r\nfunction genGeo() {\r\n  const geo = {\r\n    type: 'FeatureCollection',\r\n    crs: {\r\n      type: 'name',\r\n      properties: {\r\n          name: 'EPSG:4326'\r\n      }\r\n    },\r\n    features: []\r\n  }\r\n  const features = geo.features\r\n  let count = Random.integer(2, 5)\r\n  while(count--) {\r\n    features.push({\r\n      type: 'Feature',\r\n      properties: Mock.mock({\r\n        'portrait': '@image(\"40x59\")',\r\n        'name': '@cname',\r\n        'gender': Math.random() > 0.5 ? '男' : '女',\r\n        'nation': '@cword(2)族',\r\n        'age|20-50': 1,\r\n        'time': '@date(\"yyyy-MM-dd HH:mm\")',\r\n        'location': '@county(true)',\r\n        'reason': '@csentence',\r\n        'type': '@cword(2, 3)'\r\n      }),\r\n      geometry:{\r\n        type: 'Point',\r\n        coordinates: [\r\n          Random.float(extent[0], extent[2]),\r\n          Random.float(extent[1], extent[3])\r\n        ]\r\n      }\r\n    })\r\n  }\r\n  return geo\r\n}\r\n\r\nexport default {\r\n  url: '/realHeader',\r\n  mock: {\r\n    code: 1,\r\n    msg: 'success',\r\n    result() {\r\n      return genGeo()\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/apps/testMap/mock/realHeader.js","/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-18 09:26:24\r\n * @Description: 全局接口配置\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-09-26 10:49:26\r\n */\r\nimport Mock from 'mockjs'\r\nimport config from './config'\r\nimport { isObject } from './util/typeCheck'\r\n\r\nconst apiMap = {}\r\n\r\n/**\r\n *  当host没有域名时，根据页面的域名补充host\r\n *  @param    {string}  host        地址\r\n *  @param    {Boolean=} isWebsocket 是否是websocket（可选）\r\n *  @return   {string}  补充后的host\r\n */\r\nfunction normalizeHost(host, isWebsocket) {\r\n  let hosts = host\r\n  if (hosts && hosts.indexOf('//') !== -1) {\r\n    // 有协议，那么就认为有域名，不进行处理\r\n    return hosts\r\n  }\r\n  if (hosts === null) {\r\n    hosts = ''\r\n  }\r\n  hosts = location.host + hosts\r\n  const normalProtocol = location.protocol\r\n  if (isWebsocket) {\r\n    // 是websocket，根据页面协议猜测对应的ws协议\r\n    let protocol = 'ws://'\r\n    if (normalProtocol === 'https:') {\r\n      // https协议对应wss协议\r\n      protocol = 'wss://'\r\n    }\r\n    hosts = protocol + hosts\r\n  } else {\r\n    hosts = normalProtocol + '//' + hosts\r\n  }\r\n  return hosts\r\n}\r\n\r\n// 第一个字符不能是数字从而防止匹配到port\r\nconst paramReg = /:([^/\\d][^/]+)/g\r\n\r\nexport default {\r\n  /**\r\n   *  加载接口配置\r\n   *  @param    {Object}  apiConfigMap 接口配置\r\n   */\r\n  merge(apiConfigMap) {\r\n    const me = this\r\n    let host\r\n    let websocketHost\r\n    const mock = config.get('mock')\r\n    if(config.get('proxy')) {\r\n      // 为true，启用代理\r\n      host = config.get('proxyHost')\r\n      websocketHost = config.get('websocketProxyHost')\r\n    } else {\r\n      // 为false，不用代理\r\n      host = normalizeHost(config.get('host'))\r\n      websocketHost = normalizeHost(config.get('websocketHost'), true)\r\n    }\r\n    for(const key in apiConfigMap) {\r\n      if(!Object.prototype.hasOwnProperty.call(apiConfigMap, key)\r\n        || !{}.hasOwnProperty.call(apiConfigMap, key)) {\r\n        continue\r\n      }\r\n      // 默认不是websocket接口\r\n      let isWebsocket = false\r\n      const apiConfig = apiConfigMap[key]\r\n      const ajaxConfig = apiConfig.config || {}\r\n      const url = apiConfig.url\r\n      if(apiConfig.isWebsocket === true) {\r\n        // 接口声明是websocket接口\r\n        isWebsocket = true\r\n      }\r\n      if (!ajaxConfig.type) {\r\n        // 默认method为get\r\n        ajaxConfig.type = 'get'\r\n      }\r\n      ajaxConfig.type = ajaxConfig.type.toLowerCase()\r\n      apiMap[key] = {\r\n        // 如果是websocket接口，则需要用websocketHost\r\n        // 否则用host\r\n        url: (isWebsocket ? websocketHost : host) + url,\r\n        config: ajaxConfig\r\n      }\r\n      if(mock && apiConfig.mock) {\r\n        // 需要mock，并且api存在mock配置\r\n        Mock.mock(\r\n          me.reg(key),\r\n          ajaxConfig.type,\r\n          apiConfig.mock\r\n        )\r\n      }\r\n    }\r\n  },\r\n  /**\r\n   *  根据接口的名称，获取未绑定数据的url\r\n   *  @param    {string}  key 接口的名称\r\n   *  @return   {string}  接口的url\r\n   */\r\n  rawUrl(key) {\r\n    return apiMap[key].url\r\n  },\r\n  /**\r\n   *  根据接口的名称，获取绑定数据后的url\r\n   *  @param    {string}  key 接口的名称\r\n   *  @param    {Object=}  data 如果接口url上定义的变量名存在于data中，就会进行转换（可选）\r\n   *  @return   {string}  接口转换后的url\r\n   */\r\n  url(key, data = {}) {\r\n    const me = this\r\n    const url = me.rawUrl(key)\r\n\r\n    return url.replace(\r\n      paramReg,\r\n      (str, paramName) => {\r\n        let val = data[paramName]\r\n        if(val === undefined) {\r\n          val = 'null'\r\n        }\r\n        return global.encodeURIComponent(val)\r\n      }\r\n    )\r\n  },\r\n  /**\r\n   *  根据接口的名称，获取用来描述接口的url的正则表达式\r\n   *  @param    {string}  key 接口的名称\r\n   *  @return   {RegExp}  描述url的正则表达式\r\n   */\r\n  reg(key) {\r\n    const me = this\r\n    const rawUrl = me.rawUrl(key)\r\n    let regStr = rawUrl\r\n      .replace(/\\./g, '\\\\.')\r\n      .replace(paramReg, '[^/]+')\r\n    return new RegExp(`^${regStr}(\\\\?.*)?$`)\r\n  },\r\n  /**\r\n   *  根据接口的名称，获取接口的ajax配置\r\n   *  @param    {string}  key 接口名称\r\n   *  @return   {Object}  ajax配置\r\n   */\r\n  config(key) {\r\n    return apiMap[key] && apiMap[key].config\r\n  },\r\n  /**\r\n   *  根据接口的名称，过滤数据中能绑定到url的数据\r\n   *  @param    {string}  key  接口的名称\r\n   *  @param    {Object}  data 数据\r\n   *  @return   {Object}  无法绑定到url的剩余数据\r\n   */\r\n  filterData(key, data) {\r\n    const me = this\r\n    if (!isObject(data)) {\r\n      return data\r\n    }\r\n    const resData = {...data}\r\n    const rawUrl = me.rawUrl(key)\r\n    let execRes\r\n    while(execRes = paramReg.exec(rawUrl)) {\r\n      const paramName = execRes[1]\r\n      delete resData[paramName]\r\n    }\r\n    return resData\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/apis.js","/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-24 13:51:21\r\n * @Description: 全局配置\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-08-09 10:13:43\r\n */\r\n\r\nconst search = global.location.search\r\n\r\nexport default {\r\n  // 是否使用mock模式，在mock模式下向服务器的请求使用mockjs模拟\r\n  // hycharts默认调用mock数据，不需要再加mock标识\r\n  mock: search.indexOf('mock') === -1,\r\n  // 模拟websocket时，消息的推送间隔(毫秒)\r\n  mockInterval: 3500,\r\n  // 轮询请求时的时间间隔(毫秒)\r\n  fetchInterval: 3000,\r\n  // 是否使用proxy模式，在proxy模式下会使用proxy的url来替换原来的url\r\n  proxy: search.indexOf('proxy') !== -1,\r\n  // 线上服务器域名，当proxy为false时，所有ajax请求都会发送到这个域名\r\n  host: '/api',\r\n  // websocket线上服务器域名，当proxy为false时，所有websocket都会连接到这个域名\r\n  websocketHost: 'ws://online.com',\r\n  // 代理服务器域名，当proxy为true时，所有ajax请求都会发送到这个域名,主要用于前后台联调\r\n  proxyHost: 'http://192.168.1.199:3000/api',\r\n  // websocket代理服务器域名，当proxy为true时，所有websocket都会连接到这个域名,主要用于前后台联调\r\n  websocketProxyHost: 'ws://offline.com',\r\n  // 是否使用zoom模式，在zoom模式下页面会根据窗口的宽高使用transform调整\r\n  mapHost: 'http://192.168.1.16:10088/mapdata/cq',\r\n  // 地图路径\r\n  zoom: false,\r\n  // 固定的页面宽\r\n  pageWidth: 1920,\r\n  // 固定的页面高\r\n  pageHeight: 1080\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader/base.config.js","/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-31 16:09:06\r\n * @Description: 类型检查\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-09-26 10:33:15\r\n */\r\n\r\n/**\r\n *  检查值是否和要求的类型匹配\r\n *  @param    {*}  val        等待检查的值\r\n *  @param    {string}  expectType 期望类型\r\n *  @return   {boolean} 为true说明类型检查通过，为false说明类型检查不通过\r\n */\r\nexport function is(val, expectType) {\r\n  return Object.prototype.toString.call(val) === `[object ${expectType}]`\r\n}\r\n\r\n/**\r\n *  检查是否是Object类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Object类型，为false说明值不是Object类型\r\n */\r\nexport function isObject(val) {\r\n  return is(val, 'Object')\r\n}\r\n\r\n/**\r\n *  检查是否是String类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是String类型，为false说明值不是String类型\r\n */\r\nexport function isString(val) {\r\n  return is(val, 'String')\r\n}\r\n\r\n/**\r\n *  检查是否是Function类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Function类型，为false说明值不是Function类型\r\n */\r\nexport function isFunction(val) {\r\n  return is(val, 'Function')\r\n}\r\n\r\n/**\r\n *  检查是否是Number类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Number类型，为false说明值不是Number类型\r\n */\r\nexport function isNumber(val) {\r\n  return is(val, 'Number')\r\n}\r\n\r\n/**\r\n *  检查是否是Boolean类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Boolean类型，为false说明值不是Boolean类型\r\n */\r\nexport function isBoolean(val) {\r\n  return is(val, 'Boolean')\r\n}\r\n\r\n/**\r\n *  检查是否是Array类型\r\n *  @param    {*}  val 等待检查的类型\r\n *  @return   {boolean} 为true说明值是Array类型，为false说明值不是Array类型\r\n */\r\nexport function isArray(val) {\r\n  return is(val, 'Array')\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/typeCheck.js","/**\r\n * @Author:      孙雨珩\r\n * @DateTime:    2017-07-18 09:20:07\r\n * @Description: 对document.body进行缩放，使得body尺寸始终保持config中声明的尺寸\r\n * @Last Modified By:   孙雨珩\r\n * @Last Modified Time:    2017-08-08 13:25:11\r\n */\r\nimport './zoom.css'\r\nimport config from '@/config'\r\nimport $ from 'jquery'\r\n\r\nconst body = $('body')\r\n\r\nlet lastScale = [1, 1]\r\n\r\n/**\r\n *  根据当前窗口大小缩放页面\r\n */\r\nexport default function zoom() {\r\n  const x = window.innerWidth / config.get('pageWidth')\r\n  const y = window.innerHeight / config.get('pageHeight')\r\n  lastScale = [x, y]\r\n  body\r\n    .css('transform',`scale(${x}, ${y})`)\r\n}\r\n\r\n/**\r\n *  开启zoom\r\n */\r\nexport function adaptZoom() {\r\n  body\r\n     .addClass('zoomify')\r\n    .css('width', config.get('pageWidth'))\r\n    .css('height', config.get('pageHeight'))\r\n}\r\n\r\n/**\r\n *  将原始位置转换为zoom后的位置\r\n *  @param    {Array.number}  origin 原始位置\r\n *  @return   {Array.number}  zoom后的位置\r\n */\r\nexport function originToDeformation(origin) {\r\n  return [origin[0] * lastScale[0], origin[1] * lastScale[1]]\r\n}\r\n\r\n/**\r\n *  将zoom后的位置转换为原始位置\r\n *  @param    {Array.number}  deformation zoom后的位置\r\n *  @return   {Array.number}  原始位置\r\n */\r\nexport function deformationToOrigin(deformation) {\r\n  return [deformation[0] / lastScale[0], deformation[1] / lastScale[1]]\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/zoom/zoom.js"],"sourceRoot":""}